{"version":3,"sources":["webpack:///./src/views/Front/ProductDetail.vue","webpack:///./src/views/Front/ProductDetail.vue?7b3d"],"names":["class","role","active","isLoading","z-index","product","id","src","imageUrl","width","alt","title","category","$filters","currency","origin_price","unit","price","type","disabled","cart","isDash","dashNumber","placeholder","quantity","addNumber","loadingStatus","loadingItem","addCart","description","content","limitCount","filterProduct","recProduct","components","ProductsCardSwiper","data","baseAPI","productId","name","tips","success","message","watch","$route","this","params","undefined","getProduct","inject","methods","chageLoadingStatus","status","setTips","api","$http","get","then","response","tempItem","$router","push","$httpMessageState","catch","cartItem","product_id","qty","post","res","emitter","emit","mounted","render"],"mappings":"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","file":"js/chunk-2d0c952d.57980d3f.js","sourcesContent":["<template>\n  <Loading :active=\"isLoading\" :z-index=\"1070\"></Loading>\n  <!-- v-if=\"product.id\" 用於判斷產品是否載入完成 -->\n  <div class=\"container-lg productDetail-container\" v-if=\"product.id\">\n    <div class=\"row mb-3\">\n      <div class=\"col-md-6 productDetail-img mb-3\">\n        <img :src=\"product.imageUrl\" class=\"img-fluid rounded\" width=\"500\" :alt=\"product.title\" />\n      </div>\n      <div class=\"col-md-6 productDetailInfo\">\n        <span class=\"badge rounded-pill bg-secondary mb-2\">{{ product.category }}</span>\n        <h2>{{ product.title }}</h2>\n        <p class=\"h5 mb-0 text-muted text-end\">\n          <del>NT$ {{ $filters.currency(product.origin_price) }} / {{ product.unit }} </del>\n        </p>\n        <p class=\"h3 fw-bold text-end\">\n          NT$ {{ $filters.currency(product.price) }} / {{ product.unit }}\n        </p>\n        <div class=\"row align-items-center\">\n          <div class=\"col-6\">\n            <div class=\"input-group my-3 bg-light rounded\">\n              <div class=\"input-group-prepend\">\n                <button\n                  class=\"btn btn-outline-dark border-0 py-2\"\n                  type=\"button\"\n                  :disabled=\"!cart.isDash\"\n                  @click.prevent=\"dashNumber\"\n                >\n                  <i class=\"bi bi-dash\"></i>\n                </button>\n              </div>\n              <input\n                type=\"text\"\n                class=\"form-control border-0 text-center my-auto shadow-none bg-light\"\n                placeholder=\"\"\n                v-model.number=\"cart.quantity\"\n                disabled\n              />\n              <div class=\"input-group-append\">\n                <button\n                  class=\"btn btn-outline-dark border-0 py-2\"\n                  type=\"button\"\n                  @click.prevent=\"addNumber\"\n                >\n                  <i class=\"bi bi-plus\"></i>\n                </button>\n              </div>\n            </div>\n          </div>\n          <div class=\"col-6\">\n            <button\n              type=\"button\"\n              class=\"text-nowrap btn btn-dark w-100 py-2\"\n              :disabled=\"loadingStatus.loadingItem === product.id\"\n              @click.prevent=\"addCart\"\n            >\n              <div\n                class=\"spinner-border spinner-border-sm\"\n                role=\"status\"\n                v-if=\"loadingStatus.loadingItem === product.id\"\n              >\n                <span class=\"visually-hidden\">Loading...</span>\n              </div>\n              <div :class=\"{ 'd-none': loadingStatus.loadingItem === product.id }\">\n                加入訂餐\n                <i class=\"bi bi-plus-circle\"></i>\n              </div>\n            </button>\n          </div>\n        </div>\n        <div class=\"product-description\" v-if=\"product.description\">\n          <h4 class=\"fw-bold\">好食說明</h4>\n          <p><i class=\"bi bi-check2\"></i> {{ product.description }}</p>\n          <p v-if=\"product.content\"><i class=\"bi bi-check2\"></i> {{ product.content }}</p>\n        </div>\n      </div>\n    </div>\n    <!-- 注意事項 -->\n    <section class=\"product-notice\">\n      <h3 class=\"mb-3\">\n        <i class=\"bi bi-exclamation-triangle-fill\"></i>\n        好食提醒\n      </h3>\n      <div class=\"container-lg\">\n        <div class=\"row\">\n          <!-- 現點現做 -->\n          <div class=\"col-6 col-md-3\">\n            <div class=\"card\">\n              <div class=\"card-body\">\n                <div class=\"notice-icon\">\n                  <i class=\"bi bi-clock-fill\"></i>\n                  <p>現點現做</p>\n                </div>\n                <p>為提供優質的餐點，<strong>一律現點現做</strong>，請您耐心等候!</p>\n              </div>\n            </div>\n          </div>\n          <!-- 舒適服務 -->\n          <div class=\"col-6 col-md-3\">\n            <div class=\"card\">\n              <div class=\"card-body\">\n                <div class=\"notice-icon\">\n                  <i class=\"bi bi-emoji-smile-fill\"></i>\n                  <p>舒適服務</p>\n                </div>\n                <p>本店採半自助式，如同在家用餐的感覺，<strong>免收服務費</strong></p>\n              </div>\n            </div>\n          </div>\n          <!-- 安心食用 -->\n          <div class=\"col-6 col-md-3\">\n            <div class=\"card\">\n              <div class=\"card-body\">\n                <div class=\"notice-icon\">\n                  <i class=\"bi bi-heart-fill\"></i>\n                  <p>安心食用</p>\n                </div>\n                <p>本店食材<strong>產地皆為台灣</strong>，100%安心食用</p>\n              </div>\n            </div>\n          </div>\n          <!-- 好喝必知 -->\n          <div class=\"col-6 col-md-3\" v-if=\"product.category==='好喝'\">\n            <div class=\"card\">\n              <div class=\"card-body\">\n                <div class=\"notice-icon\">\n                  <i class=\"bi bi-cup-fill\"></i>\n                  <p>好喝必知</p>\n                </div>\n                <p>咖啡飲品<strong>為特製咖啡豆</strong>，拿鐵飲品<strong>牛奶使用光泉牛奶</strong></p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n    <!-- 好食推薦 -->\n    <section class=\"product-recommand\">\n      <h3 class=\"mb-3\">\n        <i class=\"bi bi-hand-thumbs-up-fill\"></i>\n        好食推薦\n      </h3>\n      <div class=\"container-lg\">\n        <!-- 好食推薦清單 -->\n        <ProductsCardSwiper :limitCount=\"999\" :filterProduct=\"recProduct\" />\n      </div>\n    </section>\n  </div>\n</template>\n\n<script>\nimport ProductsCardSwiper from '@/components/RecProductsCard_Swiper.vue';\n\nexport default {\n  components: {\n    ProductsCardSwiper,\n  },\n  data() {\n    return {\n      isLoading: false,\n      // Loading物件\n      loadingStatus: {\n        loadingItem: '',\n      },\n      // API路徑\n      baseAPI: `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}`,\n      // 產品\n      product: {},\n      productId: '',\n      cart: {\n        quantity: 1,\n        isDash: false,\n      },\n      recProduct: {\n        id: 0,\n        name: '',\n        category: '',\n      },\n      tips: {\n        data: {\n          success: false,\n          message: '該商品已加入至訂餐清單囉~',\n        },\n      },\n    };\n  },\n  watch: {\n    // 監聽 route 參數變化 (切換推薦產品)\n    $route() {\n      // 取得產品ID\n      this.productId = this.$route.params.productId;\n      if (this.productId !== undefined) {\n        this.getProduct();\n      }\n    },\n  },\n  inject: ['emitter', '$httpMessageState'],\n  methods: {\n    // 更改Loading狀態\n    chageLoadingStatus(status) {\n      this.isLoading = status;\n    },\n    // 設定通知訊息\n    setTips(status, message) {\n      this.tips = {\n        data: {\n          success: status,\n          message,\n        },\n      };\n    },\n    // 取得單一產品\n    getProduct() {\n      this.chageLoadingStatus(true);\n      const api = `${this.baseAPI}/product/${this.productId}`;\n      this.$http\n        .get(api)\n        .then((response) => {\n          this.chageLoadingStatus(false);\n          if (response.data.success) {\n            // 取得單一產品\n            const tempItem = { ...response.data.product };\n            this.product = { ...tempItem };\n            // 取得推薦產品資訊\n            this.recProduct = {\n              id: this.product.id,\n              name: this.product.title,\n              category: this.product.category,\n            };\n          } else {\n            // 查無產品時，導向404\n            this.$router.push('/product');\n            this.$httpMessageState(response, '產品取得');\n          }\n        })\n        .catch(() => {\n          this.setTips(false, '糟糕，找不到此產品!');\n          this.$httpMessageState(this.tips, '產品取得');\n        });\n    },\n    // 加入至購物車 (訂餐清單)\n    addCart() {\n      this.loadingStatus.loadingItem = this.product.id;\n      const cartItem = {\n        product_id: this.product.id,\n        qty: this.cart.quantity,\n      };\n      const api = `${this.baseAPI}/cart`;\n      this.$http\n        .post(api, { data: cartItem })\n        .then((res) => {\n          this.loadingStatus.loadingItem = '';\n          if (res.data.success) {\n            this.setTips(true, `${this.product.title} 已加入至訂餐清單!`);\n            this.$httpMessageState(this.tips, '加入訂餐清單');\n            this.cart.quantity = 1;\n            // 取得訂餐清單\n            this.emitter.emit('get-cart');\n          } else {\n            this.$httpMessageState(res, '加入訂餐清單');\n          }\n        })\n        .catch(() => {\n          this.loadingStatus.loadingItem = '';\n          this.setTips(false, '糟糕，加入訂餐清單失敗!');\n          this.$httpMessageState(this.tips, '加入訂餐清單');\n        });\n    },\n    // 減少數量 (等於 1 時不能減)\n    dashNumber() {\n      if (this.cart.quantity > 1) {\n        this.cart.quantity -= 1;\n        this.cart.isDash = this.cart.quantity > 1;\n      }\n    },\n    // 增加數量\n    addNumber() {\n      this.cart.quantity += 1;\n      this.cart.isDash = true;\n    },\n  },\n  mounted() {\n    // 取得產品ID\n    this.productId = this.$route.params.productId;\n    // 載入單一產品\n    this.getProduct();\n  },\n};\n</script>\n","import { render } from \"./ProductDetail.vue?vue&type=template&id=5b8707eb\"\nimport script from \"./ProductDetail.vue?vue&type=script&lang=js\"\nexport * from \"./ProductDetail.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}